{"remainingRequest":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端\\HXwork\\travel\\pages\\me\\me.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端\\HXwork\\travel\\pages\\me\\me.vue","mtime":1579022553611},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bG9naW59IGZyb20gJy4uLy4uL2NvbW1lbi9zcG90LmpzJwpsZXQgZGIgPSB3eC5jbG91ZC5kYXRhYmFzZSgpCmxldCB1c2VycyA9IGRiLmNvbGxlY3Rpb24oJ3VzZXInKQpleHBvcnQgZGVmYXVsdHsKCW5hbWU6J21lJywKCWRhdGEoKXsKCQlyZXR1cm57CgkJCXNob3c6ZmFsc2UsCgkJCWF2YXRhclVybDonJywKCQkJbmlja05hbWU6JycKCQl9Cgl9LAoJbWV0aG9kczp7CgkJZ2V0VXNlckluZm8oZSl7CgkJCWNvbnNvbGUubG9nKGUpCgkJCWxvZ2luKGUuZGV0YWlsLnVzZXJJbmZvKQoJCQkudGhlbihyZXM9PnsKCQkJCWNvbnNvbGUubG9nKHJlcykKCQkJCWNvbnNvbGUubG9nKCfnmbvpmYbmiJDlip8nKQoJCQl9KQoJCQkuY2F0Y2goZXJyPT57CgkJCQljb25zb2xlLmxvZyhlcnIpCgkJCX0pCgkJfSwKCQlpc0xvZ2luKCl7CgkJCXVzZXJzLmdldCgpCgkJCS50aGVuKHJlcz0+ewoJCQkJY29uc29sZS5sb2cocmVzKQoJCQkJaWYocmVzLmRhdGEubGVuZ3RoID09PSAwKXsKCQkJCQl0aGlzLnNob3cgPSBmYWxzZQoJCQkJfWVsc2V7CgkJCQkJdGhpcy5zaG93ID0gdHJ1ZQoJCQkJCXRoaXMuYXZhdGFyVXJsID0gcmVzLmRhdGFbMF0uYXZhdGFyVXJsCgkJCQkJdGhpcy5uaWNrTmFtZSA9IHJlcy5kYXRhWzBdLm5pY2tOYW1lCgkJCQl9CgkJCX0pCgkJCS5jYXRjaChlcnI9PnsKCQkJCWNvbnNvbGUubG9nKGVycikKCQkJfSkKCQl9Cgl9LAoJb25TaG93KCkgewoJCXRoaXMuaXNMb2dpbigpCgl9Cn0K"},{"version":3,"sources":["me.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"me.vue","sourceRoot":".","sourcesContent":["<template>\r\n\t<view class=\"wrapper\">\r\n\t\t<view class=\"content\">\r\n\t\t\t<view class=\"left\" v-if=\"show\">\r\n\t\t\t\t<image :src=\"avatarUrl\" mode=\"widthFix\"></image>\r\n\t\t\t\t<text>{{nickName}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"right\" v-if=\"!show\">\r\n\t\t\t\t<text>登录小程序，开启旅程</text>\r\n\t\t\t\t<button type=\"primary\" open-type=\"getUserInfo\" @getuserinfo=\"getUserInfo\">去登陆</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport {login} from '../../commen/spot.js'\r\n\tlet db = wx.cloud.database()\r\n\tlet users = db.collection('user')\r\n\texport default{\r\n\t\tname:'me',\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tshow:false,\r\n\t\t\t\tavatarUrl:'',\r\n\t\t\t\tnickName:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetUserInfo(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tlogin(e.detail.userInfo)\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tconsole.log('登陆成功')\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tisLogin(){\r\n\t\t\t\tusers.get()\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.length === 0){\r\n\t\t\t\t\t\tthis.show = false\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.show = true\r\n\t\t\t\t\t\tthis.avatarUrl = res.data[0].avatarUrl\r\n\t\t\t\t\t\tthis.nickName = res.data[0].nickName\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.isLogin()\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t.content{\r\n\t\twidth: 100%;\r\n\t\tpadding-left: 34rpx;\r\n\t\tpadding-right: 34rpx;\r\n\t\tpadding-top: 100rpx;\r\n\t\tpadding-bottom: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color:#4CD964;\r\n\t}\r\n\t.left{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\timage{\r\n\t\twidth: 90rpx;\r\n\t\theight: 90rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 14rpx;\r\n\t\tborder: 6rpx solid #F8F8F8;\r\n\t}\r\n\t.right{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tmargin-left: 30rpx;\r\n\t}\r\n\t.right text{\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t.right button{\r\n\t\tborder: none;\r\n\t\twidth: 300rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tbackground-color: #007AFF;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\n</style>\n"]}]}