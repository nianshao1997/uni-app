{"version":3,"sources":["webpack:///E:/前端/HXwork/travel/main.js","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue?bf9a","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue?ca5b","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue?0f8c","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue?0efe","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue?cb05","webpack:///E:/前端/HXwork/travel/pages/upload/upload.vue?75c6"],"names":["createPage","Page","timer","require","time","formatTime","Date","components","HMmessages","modal","data","showMask","mask","kind","video","show","title","tips","num","address","watchAddress","uploadimg","avatarUrl","nickName","openid","tabs","methods","exchange","index","upload","uni","chooseImage","count","sizeType","sourceType","success","res","push","tempFilePaths","deleteImg","splice","preViewImg","urls","then","console","log","catch","err","uploadVideo","showLoading","chooseVideo","hideLoading","tempFilePath","deleteVedio","turnToSearch","navigateTo","url","addRess","result","address_component","city","submit","msg","remind","length","db","wx","cloud","database","collection","get","$nextTick","$refs","mod","init","user","_openid","submitData","submitImg","img","submitVedio","vedio","submitJson","imgsFile","Promise","resovle","reject","forEach","lastIndexOf","pop","slice","cloudPath","now","Math","floor","random","uploadFile","filePath","fileID","error","datas","uploadImg","add","$store","commit","setTimeout","switchTab","icon","background","fontColor","onLoad","computed","render","uploadCity","watch","newVal","oldVal"],"mappings":"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","file":"pages/upload/upload.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/upload/upload.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./upload.vue?vue&type=template&id=3a7da4df&scoped=true&\"\nvar renderjs\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&id=3a7da4df&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a7da4df\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\前端\\\\Alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3a7da4df')) {\n      api.createRecord('3a7da4df', component.options)\n    } else {\n      api.reload('3a7da4df', component.options)\n    }\n    module.hot.accept(\"./upload.vue?vue&type=template&id=3a7da4df&scoped=true&\", function () {\n      api.rerender('3a7da4df', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"HXwork/travel/pages/upload/upload.vue\"\nexport default component.exports","export * from \"-!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=template&id=3a7da4df&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {addressData,preView,login} from '../../commen/spot.js'\nimport {mapState} from 'vuex'\nimport HMmessages from \"@/components/HM-messages/HM-messages.vue\"\nimport modal from '../../element/modal.vue'\nlet timer = require('../../commen/util.js')\nlet time = timer.formatTime(new Date())\nexport default {\n\tcomponents:{\n\t\tHMmessages,\n\t\tmodal\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowMask:false,\n\t\t\tmask:'正在上传中...请勿关闭页面',\n\t\t\ttime:time,//\n\t\t\tkind:'景点',//\n\t\t\tvideo:'',//\n\t\t\tshow:false,\n\t\t\ttitle:'',//\n\t\t\ttips:'',//\n\t\t\tnum: 0,\n\t\t\taddress:'',//\n\t\t\twatchAddress:'',\n\t\t\tuploadimg:[],//\n\t\t\tavatarUrl:'',\n\t\t\tnickName:'',\n\t\t\topenid:'',\n\t\t\ttabs: [\n\t\t\t\t'景点',\n\t\t\t\t'美食',\n\t\t\t\t'网红打卡'\n\t\t\t]\n\t\t}\n\t},\n\tmethods: {\n\t\texchange(index,kind) {\n\t\t\tthis.num = index\n\t\t\tthis.kind = kind \n\t\t},\n\t\tupload(){\n\t\t\tuni.chooseImage({\n\t\t\t    count: 9, //默认9\n\t\t\t    sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t    sourceType: ['album'], //从相册选择\n\t\t\t    success: res=> {\n\t\t\t        this.uploadimg.push(...res.tempFilePaths)\n\t\t\t    }\n\t\t\t});\n\t\t},\n\t\tdeleteImg(index){\n\t\t\tthis.uploadimg.splice(index,1)\n\t\t},\n\t\tpreViewImg(index){\n\t\t\tlet urls = this.uploadimg\n\t\t\tpreView(urls,index)\n\t\t\t.then(res=>{\n\t\t\t\tconsole.log('预览成功')\n\t\t\t})\n\t\t\t.catch(err=>{\n\t\t\t\tconsole.log('预览失败')\n\t\t\t})\n\t\t},\n\t\tuploadVideo(){\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:'上传中'\n\t\t\t})\n\t\t\tuni.chooseVideo({\n\t\t\tcount: 1,\n\t\t\tsourceType: ['camera', 'album']\n\t\t\t    })\n\t\t\t\t.then(res=>{\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tthis.show = true\n\t\t\t\t\tthis.video = res[1].tempFilePath\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t})\n\t\t\t\t.catch(err=>{\n\t\t\t\t\tconsole.log('上传失败')\n\t\t\t\t\tthis.show = false\n\t\t\t})\n\t\t},\n\t\tdeleteVedio(){\n\t\t\tthis.video = ''\n\t\t\tthis.show = false\n\t\t},\n\t\tturnToSearch(){\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'../search/search'\n\t\t\t})\n\t\t},\n\t\taddRess() {\n\t\t\taddressData().then(res => {\n\t\t\t\t\tthis.address = res.result.address_component.city\n\t\t\t\t\tconsole.log(this.address)\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.address = '杨太和(err)'\n\t\t\t\t})\n\t\t},\n\t\tsubmit(){\n\t\t\tconsole.log(this.kind)\n\t\t\tconsole.log(this.title)\n\t\t\tconsole.log(this.tips)\n\t\t\tconsole.log(this.uploadimg)\n\t\t\tconsole.log(this.video)\n\t\t\tconsole.log(this.address)\n\t\t\tif(this.title === ''){\n\t\t\t\tlet msg = '标题不能为空'\n\t\t\t\tthis.remind(msg)\n\t\t\t}else if(this.tips === ''){\n\t\t\t\tlet msg = '描述不能为空'\n\t\t\t\tthis.remind(msg)\n\t\t\t}else if(this.uploadimg.length < 3){\n\t\t\t\tlet msg = '图片不能小于三张'\n\t\t\t\tthis.remind(msg)\n\t\t\t}else{\n\t\t\t\tlet db = wx.cloud.database()\n\t\t\t\tdb.collection('user')\n\t\t\t\t.get()\n\t\t\t\t.then(res=>{\n\t\t\t\t\tif(res.data.length === 0){\n\t\t\t\t\t\tthis.$nextTick(()=>{   \n\t\t\t\t\t\t     this.$refs.mod.init()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('可以提交')\n\t\t\t\t\t\tlet user = res.data[0]\n\t\t\t\t\t\tthis.avatarUrl = user.avatarUrl\n\t\t\t\t\t\tthis.nickName = user.nickName\n\t\t\t\t\t\tthis.openid = user._openid\n\t\t\t\t\t\tthis.showMask = true\n\t\t\t\t\t\tthis.submitData()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err=>{\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync submitData(){\n\t\t\tlet img = await this.submitImg()\n\t\t\tthis.uploadimg = []\n\t\t\tconsole.log(img)\n\t\t\tlet vedio = await this.submitVedio()\n\t\t\tconsole.log(vedio)\n\t\t\tawait this.submitJson(img,vedio)\n\t\t},\n\t\tsubmitImg(){\n\t\t\tlet imgsFile = []\n\t\t\treturn new Promise((resovle,reject)=>{\n\t\t\t\tthis.uploadimg.forEach(img=>{\n\t\t\t\t\tlet index = img.lastIndexOf('.')\n\t\t\t\t\tlet pop = img.slice(index)\n\t\t\t\t\tlet cloudPath = `${Date.now()}-${Math.floor(Math.random() * 1000000)}${pop}`\n\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t  cloudPath: 'static/imgs/' + cloudPath,\n\t\t\t\t\t  filePath: img, // 文件路径\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t  // get resource ID\n\t\t\t\t\t  // console.log(res.fileID)\n\t\t\t\t\t  imgsFile.push(res.fileID)\n\t\t\t\t\t  if(imgsFile.length === this.uploadimg.length){\n\t\t\t\t\t\t  resovle(imgsFile)\n\t\t\t\t\t  }\n\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t     console.log(error)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t\n\t\t\t})\n\t\t},\n\t\tsubmitVedio(){\n\t\t\treturn new Promise((resovle,reject)=>{\n\t\t\t\tif(this.video === ''){\n\t\t\t\t\tconsole.log('用户不上传视频')\n\t\t\t\t\tresovle('')\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('用户上传视频')\n\t\t\t\t\tlet index = this.video.lastIndexOf('.')\n\t\t\t\t\tlet pop = this.video.slice(index)\n\t\t\t\t\tlet cloudPath = `${Date.now()}-${Math.floor(Math.random() * 1000000)}${pop}`\n\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t  cloudPath: 'static/vedios/' + cloudPath,\n\t\t\t\t\t  filePath: this.video, // 文件路径\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t    resovle(res.fileID)\n\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t     console.log(error)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmitJson(img,vedio){\n\t\t\tlet datas = {\n\t\t\t\tkind:this.kind,\n\t\t\t\ttitle:this.title,\n\t\t\t\ttips:this.tips,\n\t\t\t\tuploadImg:img,\n\t\t\t\tvedio:vedio,\n\t\t\t\taddress:this.address,\n\t\t\t\ttime:this.time,\n\t\t\t\tavatarUrl:this.avatarUrl,\n\t\t\t\tnickName:this.nickName,\n\t\t\t\topenid:this.openid\n\t\t\t}\n\t\t\tlet db = wx.cloud.database()\n\t\t\tdb.collection('userInfo').add({\n\t\t\t\tdata:{\n\t\t\t\t\tdatas:datas\n\t\t\t\t}\n\t\t\t}).then(res=>{\n\t\t\t\tconsole.log(res)\n\t\t\t\tthis.mask = '上传完成，正在跳转页面中...'\n\t\t\t\tthis.$store.commit('updateContent',true)\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\turl:'../strategy/strategy'\n\t\t\t\t\t})\n\t\t\t\t},1700)\n\t\t\t})\n\t\t\t.catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\t\tremind(msg){\n\t\t\tthis.HMmessages.show(msg,{icon:'error',background:'rgba(102,0,50,.5)',fontColor:'#fff'})\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.addRess()\n\t},\n\tcomputed:{\n\t\t...mapState(['uploadCity']),\n\t\trender(){\n\t\t\tthis.watchAddress = this.uploadCity.city\n\t\t\tconsole.log(this.address)\n\t\t}\n\t},\n\twatch:{\n\t\twatchAddress(newVal,oldVal){\n\t\t\tthis.address = newVal\n\t\t\tconsole.log(this.address)\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=style&index=0&id=3a7da4df&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=style&index=0&id=3a7da4df&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}